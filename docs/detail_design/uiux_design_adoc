= UI/UX詳細設計書
:toc: left
:toclevels: 3
:sectnums:
:icons: font
:source-highlighter: highlight.js

== デザインシステム

=== カラーパレット

==== プライマリーカラー
[cols="1,1,3"]
|===
|色名 |カラーコード |用途

|Primary Blue
|#3b82f6
|メインボタン、アクセント

|Primary Blue Dark
|#1d4ed8
|ボタンのアクティブ状態

|Primary Blue Light
|#dbeafe
|背景、薄いアクセント
|===

==== セマンティックカラー
[cols="1,1,3"]
|===
|色名 |カラーコード |用途

|Success Green
|#22c55e
|削除完了、成功状態

|Warning Orange
|#f59e0b
|注意喚起、確認必要

|Danger Red
|#ef4444
|削除操作、エラー状態

|Info Blue
|#06b6d4
|情報提示、ヒント
|===

==== グレースケール
[cols="1,1,3"]
|===
|色名 |カラーコード |用途

|Gray 50
|#f9fafb
|背景色（最薄）

|Gray 100
|#f3f4f6
|カード背景

|Gray 500
|#6b7280
|セカンダリテキスト

|Gray 900
|#111827
|プライマリテキスト
|===

=== タイポグラフィ

[cols="1,1,1,3"]
|===
|スタイル |サイズ |重み |用途

|H1
|24px
|700 (Bold)
|画面タイトル

|H2
|20px
|600 (SemiBold)
|セクションタイトル

|Body
|16px
|400 (Regular)
|本文、説明文

|Caption
|14px
|400 (Regular)
|補足情報、メタデータ

|Button
|16px
|600 (SemiBold)
|ボタンテキスト
|===

=== スペーシング規則

[cols="1,1,3"]
|===
|サイズ |値 |用途

|xs
|4px
|要素間の微細な間隔

|sm
|8px
|関連要素間の間隔

|md
|16px
|セクション内の標準間隔

|lg
|24px
|セクション間の間隔

|xl
|32px
|画面レベルの大きな間隔
|===

== 画面設計

=== 1. ダッシュボード画面

==== 画面構成
[source]
----
┌─────────────────────────────────────────┐
│ [AI Photo Cleaner]              [⚙️設定] │
├─────────────────────────────────────────┤
│                                         │
│ 📊 あなたの写真ライブラリ                     │
│ ┌─────────────────────────────────────┐   │
│ │ 総枚数: 3,247枚                     │   │
│ │ 使用容量: 12.4 GB                  │   │
│ │ 最終整理: 2週間前                   │   │
│ └─────────────────────────────────────┘   │
│                                         │
│ 🚀 スマート分析開始                        │
│ ┌─────────────────────────────────────┐   │
│ │        [今すぐ分析する]              │   │
│ │     予想効果: ~2.1GB節約             │   │
│ └─────────────────────────────────────┘   │
│                                         │
│ 📈 前回の整理効果                          │
│ ┌─────────────────────────────────────┐   │
│ │ 削除枚数: 234枚  容量削減: 1.2 GB     │   │
│ │ 節約時間: 4分30秒                   │   │
│ └─────────────────────────────────────┘   │
│                                         │
│ ⚡ クイックアクション                       │
│ [重複のみ] [類似のみ] [低品質] [全分析]      │
│                                         │
└─────────────────────────────────────────┘
----

==== UI要素詳細
* **ヘッダー**: シンプルなタイトル + 設定アイコン
* **統計カード**: 視覚的に分かりやすい数値表示
* **メインCTA**: 目立つボタンでアクション促進
* **実績表示**: 前回の成功体験で信頼感向上
* **クイックアクション**: 上級ユーザー向けショートカット

=== 2. AI分析画面

==== 画面構成
[source]
----
┌─────────────────────────────────────────┐
│ AI分析中... 🧠                          │
├─────────────────────────────────────────┤
│                                         │
│ ████████████░░░░░░░░ 67%                │
│                                         │
│ 📸 写真をスキャン中...                     │
│ 進行状況: 1,247 / 3,247枚                │
│                                         │
│ 🔍 現在の作業:                           │
│ 重複写真を検出しています                    │
│                                         │
│ ⏱️ 残り時間: 約2分                        │
│                                         │
│                                         │
│           [分析を停止]                    │
│                                         │
└─────────────────────────────────────────┘
----

==== プログレス表示要件
* **視覚的進捗**: バー + パーセンテージ
* **詳細情報**: 現在の処理内容を明示
* **時間予測**: ユーザーの待機不安を軽減
* **キャンセル**: 長時間処理への対応

=== 3. 結果表示画面

==== 画面構成
[source]
----
┌─────────────────────────────────────────┐
│ 分析完了！ ✨                            │
├─────────────────────────────────────────┤
│                                         │
│ 🎯 最大 1.1 GB の容量を節約できます！        │
│                                         │
│ ┌─────────────────────────────────────┐   │
│ │ 🔄 重複写真: 45枚                    │   │
│ │ 削除可能: 245 MB                    │   │
│ │ [詳細] [一括削除]                   │   │
│ └─────────────────────────────────────┘   │
│                                         │
│ ┌─────────────────────────────────────┐   │
│ │ 🎭 類似写真: 127グループ              │   │
│ │ 削除可能: 680 MB                    │   │
│ │ [詳細] [選択削除]                   │   │
│ └─────────────────────────────────────┘   │
│                                         │
│ ┌─────────────────────────────────────┐   │
│ │ 📉 低品質写真: 89枚                  │   │
│ │ 削除可能: 156 MB                    │   │
│ │ [詳細] [一括削除]                   │   │
│ └─────────────────────────────────────┘   │
│                                         │
│    [すべて削除] [カスタム選択]              │
│                                         │
└─────────────────────────────────────────┘
----

==== 情報階層
. **総合効果**: 最も重要な情報を上部に配置
. **カテゴリ別結果**: 具体的な内訳を表示
. **アクションボタン**: 各カテゴリに対応した操作
. **最終決定**: 全体操作のためのメインCTA

=== 4. 詳細確認画面（重複写真）

==== 画面構成
[source]
----
┌─────────────────────────────────────────┐
│ ← 重複写真 (45枚)                        │
├─────────────────────────────────────────┤
│                                         │
│ グループ 1/15                            │
│                                         │
│ ┌─────────────┐    ┌─────────────┐      │
│ │             │    │             │      │
│ │   [写真A]    │    │   [写真B]    │      │
│ │             │    │             │      │
│ │🏠 オリジナル   │    │📱 重複       │      │
│ │2024/03/15   │    │2024/03/15   │      │
│ │  2.1MB      │    │  2.1MB      │      │
│ │     ✓       │    │     🗑️       │      │
│ └─────────────┘    └─────────────┘      │
│                                         │
│ 💡 同じ写真が検出されました                  │
│                                         │
│ [両方保持] [右を削除] [左を削除]             │
│                                         │
│ [← 前へ]              [次へ →]         │
│                                         │
└─────────────────────────────────────────┘
----

==== インタラクション要件
* **写真比較**: 2枚を並べて表示
* **メタデータ**: 撮影日、ファイルサイズを表示
* **推奨表示**: AIの推奨を視覚的に明示
* **操作選択**: 複数の削除オプションを提供

=== 5. 詳細確認画面（類似写真）

==== 画面構成
[source]
----
┌─────────────────────────────────────────┐
│ ← 類似写真グループ 5/127                   │
├─────────────────────────────────────────┤
│                                         │
│ 類似度: 91% 📊                          │
│                                         │
│ ┌───────┐┌───────┐┌───────┐┌───────┐  │
│ │       ││       ││       ││       │  │
│ │ 写真1  ││ 写真2  ││ 写真3  ││ 写真4  │  │
│ │       ││       ││       ││       │  │
│ │⭐️5.8  ││⭐️7.2  ││⭐️6.1  ││⭐️4.3  │  │
│ │ 🗑️    ││  ✓    ││ 🗑️    ││ 🗑️    │  │
│ └───────┘└───────┘└───────┘└───────┘  │
│                                         │
│ 💡 AI推奨: 写真2を保持                    │
│ 理由: 最も鮮明で構図が良い                  │
│                                         │
│ [AI推奨採用] [手動選択] [全保持] [全削除]    │
│                                         │
└─────────────────────────────────────────┘
----

==== 類似写真UI特徴
* **グリッド表示**: 複数写真を一覧可能
* **品質スコア**: AIの評価を数値で表示
* **推奨理由**: AI判断の根拠を説明
* **柔軟な操作**: 推奨採用から手動選択まで

== コンポーネント設計

=== 再利用コンポーネント一覧

==== PhotoCard
**用途**: 写真表示用の標準カード

**Props**:
[cols="1,1,3"]
|===
|プロパティ |型 |説明

|photo
|Object
|写真データ（uri, metadata等）

|selected
|Boolean
|選択状態

|showScore
|Boolean
|品質スコア表示フラグ

|onSelect
|Function
|選択時のコールバック
|===

==== ProgressCard
**用途**: 進捗状況の表示

**Props**:
[cols="1,1,3"]
|===
|プロパティ |型 |説明

|title
|String
|進捗タイトル

|current
|Number
|現在の進捗値

|total
|Number
|総数

|description
|String
|進捗の説明文
|===

==== ActionButton
**用途**: CTA用の標準ボタン

**Variants**:
* `primary` - メインアクション用
* `secondary` - サブアクション用  
* `danger` - 削除などの危険なアクション用

==== StatCard
**用途**: 統計情報の表示カード

**Props**:
[cols="1,1,3"]
|===
|プロパティ |型 |説明

|icon
|String
|アイコン（絵文字またはアイコン名）

|title
|String
|カードタイトル

|value
|String/Number
|メインの値

|description
|String
|補足説明
|===

== ナビゲーション設計

=== 画面遷移フロー

[source]
----
Dashboard
    ↓ [分析開始]
Analysis
    ↓ [分析完了]
Results
    ↓ [詳細確認]
PhotoReview (重複/類似/低品質)
    ↓ [削除実行]
Results (更新)
    ↓ [完了]
Dashboard
----

=== ナビゲーション構造

==== Stack Navigator
* **Dashboard** - メイン画面（戻るボタンなし）
* **Analysis** - 分析中（戻るボタン無効）
* **Results** - 結果表示
* **PhotoReview** - 詳細確認
* **Settings** - 設定（モーダル）
* **Premium** - プレミアム案内（モーダル）

==== タブナビゲーション
将来的な機能拡張時に以下を想定：
* **Home** - メインダッシュボード
* **History** - 整理履歴
* **Settings** - 設定・プレミアム

== レスポンシブ対応

=== 画面サイズ対応

==== 小型端末（iPhone SE等）
* フォントサイズを1段階縮小
* 余白を狭く調整
* 一部情報を折りたたみ表示

==== 大型端末（iPad等）
* 写真グリッドを2列→3列に変更
* サイドバーナビゲーション採用
* より多くの情報を同時表示

==== フォント倍率対応
* Dynamic Type（iOS）対応
* アクセシビリティ設定への配慮
* 最大150%まで拡大対応

== アクセシビリティ

=== 基本要件

==== 視覚的配慮
* 色だけでない情報伝達（アイコン + 色）
* 十分なコントラスト比（WCAG 2.1 AA準拠）
* フォーカス状態の明確な表示

==== 操作的配慮  
* タッチターゲット最小44pt
* VoiceOver対応（iOS）
* TalkBack対応（Android）
* スクリーンリーダー用の適切なラベル

==== 認知的配慮
* シンプルで一貫したUI
* 明確なフィードバック
* 操作の取り消し可能

== アニメーション・トランジション

=== 基本方針
* **機能的**: 情報の変化を分かりやすく
* **快適**: 60fps維持、適切な時間設定  
* **控えめ**: 過度な装飾は避ける

=== 主要アニメーション

==== 画面遷移
* **Push/Pop**: 標準的なスライド遷移
* **Modal**: 下からスライドアップ
* **時間**: 300ms（標準）

==== 進捗表示
* **プログレスバー**: スムーズな伸縮
* **ローディング**: 回転アニメーション
* **数値カウントアップ**: 結果表示時

==== フィードバック
* **ボタンタップ**: 軽いスケール
* **削除**: フェードアウト
* **完了**: チェックマークアニメーション

== UIテスト・バリデーション

=== A/Bテスト候補

[cols="1,2,2"]
|===
|要素 |パターンA |パターンB

|メインボタン色
|Blue (#3b82f6)
|Green (#22c55e)

|進捗表示
|円形プログレス
|線形プログレス

|削除確認
|モーダルダイアログ
|インライン確認
|===

=== 使いやすさ指標

* **タスク完了率**: 90%以上
* **タスク完了時間**: 5分以内
* **エラー率**: 5%以下
* **満足度**: 4.0/5.0以上

== 次のステップ

この設計に基づき実装時は以下を参照：

* link:ai_engine_design.adoc[AI エンジン設計書] - 分析ロジック
* link:database_design.adoc[データベース設計書] - データ構造
* link:code_guide_design.adoc[実装ガイド] - 技術的詳細

IMPORTANT: デザインシステムの一貫性を保つため、新しいコンポーネント作成前にこの設計書を必ず参照してください。